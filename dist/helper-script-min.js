// Halper.js Common ES/JS utility library
// https://github.com/ahabra/js-helper
// Copyright 2021 (C) Abdul Habra. Version 0.4.0.
// Apache License Version 2.0


var jshelper=(()=>{var W=Object.defineProperty;var f=(e,r)=>{for(var t in r)W(e,t,{get:r[t],enumerable:!0})};var ae={};f(ae,{Domer:()=>a,LineCompare:()=>g,Objecter:()=>l,Stringer:()=>p});var a={};f(a,{add:()=>k,all:()=>j,classPresentIf:()=>te,createElement:()=>X,createElements:()=>C,first:()=>U,getAttributes:()=>V,id:()=>K,removeElements:()=>re,setContent:()=>ee,tag:()=>T});var l={};f(l,{equals:()=>S,forEachEntry:()=>c,has:()=>H,isDate:()=>h,isFunction:()=>d,isInteger:()=>M,isNil:()=>D,isNumber:()=>O,isRegExp:()=>x,isString:()=>o});function D(e){return e==null}function o(e){return s(e,"String")}function d(e){return s(e,"Function")}function h(e){return s(e,"Date")}function O(e){return s(e,"Number")?Number.isNaN(e)?!1:Number.isFinite(e):!o(e)||(e=e.trim(),e==="")?!1:!isNaN(e)}function M(e){return O(e)?Number.isInteger(Number.parseFloat(e)):!1}function x(e){return s(e,"RegExp")}function s(e,r){return Object.prototype.toString.call(e)===`[object ${r}]`}function c(e,r){if(!(!e||!r)){if(Array.isArray(e)){e.forEach((t,n)=>{r(n,t)});return}Object.entries(e).forEach(t=>r(t[0],t[1]))}}function H(e,r){return!e||!r?!1:Object.prototype.hasOwnProperty.call(e,r)}function S(e,r){return e===r?!0:e===void 0||r===void 0?!1:I(e,r)}function I(e,r){return w(e)||w(r)?e===r:P(e,r)}var B=new Set(["boolean","number","bigint","string","symbol"]);function w(e){return B.has(typeof e)}function P(e,r){return z(e,r)?G(e,r)?!0:J(e,r):!1}function z(e,r){return L(e)===L(r)}function L(e){return Object.prototype.toString.call(e)}function G(e,r){return h(e)&&h(r)?e.getTime()===r.getTime():!1}function J(e,r){let t=Object.keys(e);return t.length!==Object.keys(r).length?!1:t.every(n=>S(e[n],r[n]))}function K(e,r=document){return y(r)&&(r=r.shadowRoot),r.getElementById(e)}function j(e,r=document){return y(r)&&(r=r.shadowRoot),Array.from(r.querySelectorAll(e))}function U(e,r=document){if(y(r)&&(r=r.shadowRoot),!e.includes("/"))return r.querySelector(e);let t=e.split("/").map(n=>n.trim()).filter(n=>n.length>0);for(let n of t)if(r=Q(n,r),r===null)break;return r}function Q(e,r){return e==="shadowRoot"||e==="shadow-root"?r.shadowRoot:r.querySelector(e)}function y(e){return e&&e.shadowRoot&&e.tagName.includes("-")}function V(e){let r={},t=e.attributes;if(!t||t.length===0)return r;for(let n=0;n<t.length;n++){let i=t[n];r[i.name]=i.value}return r}function C(e=""){if(e=e.trim(),!e)return[];let r=document.createElement("template");return r.innerHTML=e,Array.from(r.content.childNodes)}function X(e,r={},t=""){let n=T(e,r,t),i=C(n);return i.length===0?null:i[0]}function T(e,r={},t=""){if(!e)return"";let n=Y(r);return`<${e}${n}>${t}</${e}>`}function Y(e){let r=[];return c(e,(n,i)=>{r.push(`${n}="${i}"`)}),(r.length>0?" ":"")+r.join(" ")}var Z=new Set(["beforebegin","afterbegin","beforeend","afterend"]);function k(e,r,t="beforeend"){return t=t.toLowerCase(),Z.has(t)?(o(r)?e.insertAdjacentHTML(t,r):_(e,r,t),!0):!1}function _(e,r,t){Array.isArray(r)?r.forEach(n=>e.insertAdjacentElement(t,n)):e.insertAdjacentElement(t,r)}function ee(e,...r){e.innerHTML="",e.append(...r)}function re(e,r=document){j(e,r).forEach(n=>{n.parentNode.removeChild(n)})}function te(e,r,t){if(!e)return;let n=t?"add":"remove";e.classList[n](r)}var p={};f(p,{endsWith:()=>$,indexOf:()=>b,indexOfFirstMatch:()=>ne,indexOfLastMatch:()=>ie,isEmpty:()=>q,removePrefix:()=>A,removeSuffix:()=>R,removeSurrounding:()=>ue,replaceAll:()=>v,replaceTemplate:()=>se,startsWith:()=>N,substringAfter:()=>oe,substringBefore:()=>fe,trim:()=>m});function b(e,r,t=0,n=!1){return e?n?e.toLowerCase().indexOf(r.toLowerCase(),t):e.indexOf(r,t):-1}function ne(e,r){return!r||!e?-1:e.split("").findIndex(r)}function ie(e,r){if(!r||!e)return-1;let t=e.split("");for(let n=t.length;n>=0;--n)if(r(t[n],n))return n;return-1}function N(e="",r=void 0,t=!1){if(t){let n=e.substring(0,r.length).toLowerCase();return r.toLowerCase()===n}return e.startsWith(r)}function $(e,r,t=!1){return t?e.toLowerCase().endsWith(r.toLowerCase()):e.endsWith(r)}function A(e,r,t=!1){return N(e,r,t)&&(e=e.substring(r.length)),e}function R(e,r,t=!1){return $(e,r,t)&&(e=e.substring(0,e.length-r.length)),e}function ue(e,r,t,n=!1){return R(A(e,r,n),t,n)}function oe(e,r,t=!1){if(!r)return e;let n=b(e,r,0,t);return n<0?"":e.substring(n+r.length)}function fe(e,r,t=!1){if(!r)return"";let n=b(e,r,0,t);return n<0?e:e.substring(0,n)}function m(e){return q(e)?"":(o(e)||(e=String(e)),e.trim(e))}function q(e){return e==null||e===""}function v(e,r,t){if(d(String.prototype.replaceAll))return e.replaceAll(r,t);if(x(r))return e.replace(r,t);let n=new RegExp(r,"g");return e.replace(n,t)}function se(e="",r={},t="${",n="}"){return c(r,(i,u)=>{u!==void 0&&(i=t+i+n,e=v(e,i,u))}),e}var g={};f(g,{compareLines:()=>le});function le(e,r,{trim:t=!0,skipEmpty:n=!0,caseSensitive:i=!0}={trim:!0,skipEmpty:!0,caseSensitive:!0}){if(e=F(e,{trim:t,skipEmpty:n}),r=F(r,{trim:t,skipEmpty:n}),e.length!==r.length)return`t1 has ${e.length} lines(s) while t2 has ${r.length} line(s).`;for(let u=0;u<e.length;u++){let E=ce(e[u],r[u],u,i);if(E.length>0)return E}return""}function ce(e,r,t,n){let i=n?e:e.toLowerCase(),u=n?r:r.toLowerCase();return i!==u?`Line #${t+1} mismatch.
${e}
${r}`:""}function F(e,{trim:r,skipEmpty:t}){return r&&(e=m(e)),e=e.split(`
`),r&&(e=e.map(n=>m(n))),t&&(e=e.filter(n=>!!n)),e}return ae;})();
